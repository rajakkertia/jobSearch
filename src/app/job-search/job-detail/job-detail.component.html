<!-- <button
  (click)="goBack()"
  class="inline-flex items-center text-sm text-blue-600 hover:text-blue-800 mb-4"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
    stroke-width="2"
    class="w-4 h-4 mr-2"
  >
    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
  </svg>
</button> -->

<div class="max-w-3xl mx-auto p-6 space-y-6">
  @if (loading()) {
  <div class="flex items-center justify-center h-64">
    <p class="text-gray-500 text-center">Loading job details...</p>
  </div>

  } @else if (job()) {
  <div class="flex justify-between items-start">
    <div>
      <h1 class="text-2xl font-bold mb-1">{{ job()!.job_title }}</h1>
      <p class="text-sm text-gray-600">
        {{ job()!.employer_name }} â€“ {{ job()!.job_city }},
        {{ job()!.job_country }}
      </p>
      <p class="text-sm text-gray-400 italic">
        Posted: {{ job()!.job_posted_at_datetime_utc | date : "mediumDate" }}
      </p>
    </div>

    <button
      (click)="toggleBookmark(job()!)"
      [attr.aria-label]="
        isBookmarked(job()!) ? 'Remove bookmark' : 'Add bookmark'
      "
      class="text-right"
    >
      <svg
        *ngIf="isBookmarked(job()!)"
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        class="w-6 h-6 text-yellow-500"
        viewBox="0 0 24 24"
      >
        <path
          d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"
        />
      </svg>
      <svg
        *ngIf="!isBookmarked(job()!)"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        class="w-6 h-6 text-gray-400"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"
        />
      </svg>
    </button>
  </div>

  @if (job()!.employer_logo) {
  <img
    [src]="job()!.employer_logo"
    [alt]="job()!.employer_name"
    class="w-20 h-20 object-contain border rounded shadow my-4"
  />
  }

  <div
    class="prose prose-sm max-w-none text-gray-800"
    [innerHTML]="formatDescription(job()!.job_description)"
  ></div>

  <a
    [href]="job()!.job_apply_link"
    target="_blank"
    class="inline-block mt-6 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
  >
    Apply Now
  </a>
  } @else {
  <p class="text-red-500">Job not found or failed to load.</p>
  }
</div>
